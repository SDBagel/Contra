var menu, nav, loadTarget, targetPos, skip = 0, formatSearch = !1; function setCookie(a, b, c) { var d = ""; if (c) { var e = new Date; e.setTime(e.getTime() + 1e3 * (60 * (60 * (24 * c)))), d = "; expires=" + e.toUTCString(); } document.cookie = a + "=" + (b || "") + d + "; path=/"; } function eraseCookie(a) { var b = new Date; b.setTime(b.getTime() - 1e3), expires = "; expires=" + b.toUTCString(), document.cookie = a + "=" + expires + ";path=/;"; } document.addEventListener("DOMContentLoaded", function () { menu = document.getElementById("links"), nav = document.getElementById("nav"); for (var a, b = document.getElementsByClassName("neoload"), c = 0; c < b.length; c++)a = b[c], neoload(a, a.getAttribute("data-query"), a.getAttribute("data-amount"), a.getAttribute("data-type")); var d = document.getElementById("search"); d && (formatSearch = !0, skip = 2); var e = document.getElementById("query"); e && loadContent(e.innerText), document.cookie.includes("compact=yes") && document.getElementById("compact-compatible") && showCompact(), window.addEventListener("resize", function () { onResize(); }); }); function showMenu() { "none" === menu.style.display || "" === menu.style.display ? (menu.style.display = "flex", nav.style.height = "unset") : (menu.style.display = "none", nav.style.height = "50px"); } function onResize() { ("" !== menu.style.height || "" !== nav.style.height) && 768 < window.innerWidth && (menu.style.display = "", nav.style.height = ""); } function redirect(a) { window.location = "/article/" + a; } function changePFP(a, b) { "reset" === b ? request("POST", "api/v1/account/" + a + "/picture/" + b, () => { request("GET", "api/v1/account/" + a + "/picture", a => document.getElementById("user-picture").src = a + "&s=512"); }) : (request("POST", "api/v1/account/" + a + "/picture/" + b), document.getElementById("user-picture").src = b, hideDialog()); } function request(a, b, c = null) { var d = new XMLHttpRequest; d.open(a, "https://" + window.location.host + "/" + b, !0), d.onreadystatechange = function () { 4 === d.readyState && 200 === d.status && c(d.responseText); }, d.send(); } function neoload(a, b, c, d) { request("GET", "api/v1/article/list/" + b + "/" + c, b => { var c = JSON.parse(b), e = 0, f = ""; c.forEach(a => { if ("search" === d) f += formatSearchCard(a.id, a.image, a.title, a.author, a.date, a.summary); else if ("block" === d) { var b = !1; 0 === e % 2 ? (2 === e % 4 && (b = !b), f += "<section>" + formatCard(a.id, a.image, a.title, a.summary, !b, b)) : (3 === e % 4 && (b = !b), f += formatCard(a.id, a.image, a.title, a.summary, b, !b) + "</section>"); } else "mini" === d && (f += formatNewsbeat(a.id, a.image, a.title, a.summary)); e++; }), a.innerHTML += f; }); } function loadContent(a) { if (loadTarget = document.getElementById("loadTarget"), !!loadTarget) { var b = new XMLHttpRequest; b.open("GET", "https://" + window.location.host + "/api/v1/article/list/" + a + "/8/" + skip, !0), skip++ , b.onreadystatechange = function () { if (4 === b.readyState && 200 === b.status) { if ("" === b.responseText) return document.getElementById("loadSection") && "" === loadTarget.innerHTML && (document.getElementById("loadSection").style.display = "none"), document.getElementById("loadButton").style.display = "none", void (loadTarget.innerHTML += "<div class='section-title text-center'><h2>No more content! :(</h2></div>"); var a = JSON.parse(b.responseText), c = 0, d = ""; a.forEach(a => { if (formatSearch) d += formatSearchCard(a.id, a.image, a.title, a.author, a.date, a.summary); else { var b = !0; 0 === c % 2 ? (2 === c % 4 && (b = !b), d += "<section>" + formatCard(a.id, a.image, a.title, a.summary, !b, b)) : (3 === c % 4 && (b = !b), d += formatCard(a.id, a.image, a.title, a.summary, b, !b) + "</section>"); } c++; }), loadTarget.innerHTML += d, document.cookie.includes("compact=yes") && document.getElementById("compact-compatible") && showCompact(); } }, b.send(); } } function formatCard(a, b, c, d, e, f) { var g = "card story"; return e && (g += " card-big"), f && (g += " card-encapsulate"), "<div class='" + g + "' onclick='redirect(" + a + ")'><span class='image-container'><img src='" + b + "' alt='" + c + " Thumbnail Image' /></span><div><h2>" + c + "</h2><p>" + d + "</p></div></div>"; } function formatSearchCard(a, b, c, d, e, f) { return "<div class='card card-big card-search'><span class='image-container'><img src='" + b + "' alt='" + c + " Thumbnail Image' /></span><div><h2>" + c + "</h2><p class='compact-hidden'>" + d + " - " + e + "</p><hr class='compact-hidden' /><p>" + f + "</p><a href='https://" + window.location.host + "/article/" + a + "'>Read More</a></div></div>"; } function formatNewsbeat(a, b, c, d) { return "<div class='card card-big card-encapsulate card-newsbeat' onclick='redirect(" + a + ")'><span class='image-container'><img src='" + b + "' alt='" + c + " Thumbnail' /></span><div><h2>" + c + "</h2><p>" + d + "</p></div></div>"; } function showComfortable() { for (var a = document.getElementsByClassName("compact-hidden"), b = 0; b < a.length; b++)a[b].style.display = "flex"; for (var c = document.getElementsByClassName("card"), d = 0; d < c.length; d++)c[d].style.marginTop = "10px", c[d].style.marginBottom = "10px", c[d].style.borderRadius = "10px", c[d].style.borderBottom = "none"; eraseCookie("compact"), document.getElementById("comfortableButton").classList = "btn btn-info", document.getElementById("compactButton").classList = "btn btn-outline-info"; } function showCompact() { for (var a = document.getElementsByClassName("compact-hidden"), b = 0; b < a.length; b++)a[b].style.display = "none"; for (var c = document.getElementsByClassName("card"), d = 0; d < c.length; d++)c[d].style.marginTop = 0, c[d].style.marginBottom = 0, c[d].style.borderRadius = 0, c[d].style.borderBottom = "2px solid #abc"; setCookie("compact", "yes", 0), document.getElementById("comfortableButton").classList = "btn btn-outline-info", document.getElementById("compactButton").classList = "btn btn-info"; } function setDialog(a) { var b = document.getElementById("dialog"), c = document.getElementById(a); b.style.display || (b.style.display = "none"), "none" === b.style.display ? (b.style.display = "flex", c.style.display = "flex") : (b.style.display = "none", b.childNodes.forEach(a => a.style.display = "none")); } function hideDialog() { dialog.style.display = "none"; } function stopPropogation(a) { a.stopPropagation(); }